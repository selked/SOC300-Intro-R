our_gss$age_ord,
.5,
type = 1
)
quantile(our_gss$age_ord, .5, type = 1, na.rm = TRUE)
quantile(
our_gss$age_ord,
.5,
type = 1,
na.rm = TRUE
)
hist(
c(
rnorm(300),
1,
-20
),
main = "Normal distribution with outliers; n = 300",
xlab = "Variable Response Values"
)
View(our_gss)
library(gssr)
library(gssrdoc)
data("gss_all")
gss_2022 <- subset(gss_all, year=="2022")
gss_2022 <- subset(gss_all, year==2022)
gss_2022 <- gss_get_years(2022)
gss_2022 <- gss_get_years(year = 2022)
gss_get_yr(2022)
gss_2022 <- gss_get_yr(2022)
View(our_gss)
gss_2022 <- subset(gss_all, year==2022)
View(our_gss)
#################################
#GSS Subsetting (not for class)
#################################
#Subset the data so that we can focus on a just a few variables of interest
cont_vars <- c("year", "id", "age")
cat_vars <- c("race", "sex", "realrinc", "educ", "partyid", "happy")
my_vars <- c(cont_vars, cat_vars)
gss_sub <- gss_2022 |>
select(all_of(my_vars))
View(gss_sub)
#Make sure all missing data is coded as NA
gss_sub <- gss_sub |>
mutate(across(everything(), haven::zap_missing))
#Recode categorical variables into factors
gss_sub <- gss_sub |>
mutate(across(all_of(cat_vars), forcats::as_factor))
View(gss_sub)
gss_sub$happy |>
summary() |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
gss_sub |>
drop_na(happy) |>
summary(happy) |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
gss_sub |>
drop_na(happy) |>
summary(gss_sub$happy) |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
gss_sub$happy |>
drop_na() |>
summary() |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
gss_sub[!is.na(gss_sub$happy), ] |>
summary() |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
gss_sub$happy |>
summary() |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
str(gss_sb)
str(gss_sub)
gss_sub$realrinc <- gss_sub$realrinc |>
as.character() |>
as.numeric()
str(gss_sub)
View(our_gss)
View(gss_sub)
rm(our_gss)
our_gss <- gss_sub
save(our_gss, file="C:/Users/selke/Desktop/Teaching/SOC 300 F 2025")
save(our_gss, file="C:/Users/selke/Desktop/Teaching/SOC 300 F 2025/our_gss.rda")
load("~/git_repos/SOC300-Intro-R/our_gss.rda")
View(our_gss)
write.csv(our_gss, file="our_gss.rda")
write.csv(our_gss, file="our_gss.csv")
View(our_gss)
rm(our_gss)
our_gss <- read.csv("our_gss.csv")
View(our_gss)
our_gss <- our_gss[,-1]
save(our_gss, file="our_gss.rda")
View(our_gss)
str(our_gss)
our_gss$happy <- as.factor(our_gss$happy)
str(our_gss)
levels(happy)
levels(our_gss$happy)
our_gss$happy <- as.ordered(our_gss$happy)
str(our_gss)
levels(our_gss$happy)
our_gss <- our_gss[,-7]
our_gss <- our_gss |>
cat_vars <- c("race", "sex", "partyid")
our_gss <- our_gss |>
mutate(across(all_of(cat_vars), forcats::as_factor))
library(tidyverse)
our_gss <- our_gss |>
mutate(across(all_of(cat_vars), forcats::as_factor))
str(our_gss)
save(our_gss, file="our_gss.rda")
gss_sub$happy |>
summary() |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
our_gss$happy |>
summary() |>
barplot(
main = "Happiness Distribution of GSS Respondents",
xlab = "Response value"
)
quantile(
our_gss$happy,
.5,
type = 1,
na.rm = TRUE
)
mode(our_gss$realrinc)
View(our_gss)
install.packages("DescTools")
library(DescTools)
Mode(our_gss$happy, na.rm = TRUE)
Median(our_gss$happy)
Median(our_gss$happy, na.rm = TRUE)
our_gss$happy |>
summary() |>
barplot(
main = "Happiness Distribution of 2022 GSS Respondents",
xlab = "Response value",
na.rm = TRUE
)
our_gss$happy |>
summary() |>
barplot(
main = "Happiness Distribution of 2022 GSS Respondents",
xlab = "Response value"
)
library(gtsummary)
load("~/git_repos/SOC300-Intro-R/our_gss.rda")
test <- our_gss |> tbl_summary(include = c(partyid))
View(our_gss)
View(test)
test
our_gss <- our_gss |>
mutate(
partyid_recoded=fct_collapse(partyid,
"Democrat" = c("strong democrat", "not very strong democrat"),
"Republican" = c("strong republican","not very strong republican"),
"Independent" = c("independent, close to democrat", "independent (neither, no response)", "independent, close to republican"),
"Other Party" = c("other party")
))
library(tidyverse)
library(janitor)
our_gss <- our_gss |>
mutate(
partyid_recoded=fct_collapse(partyid,
"Democrat" = c("strong democrat", "not very strong democrat"),
"Republican" = c("strong republican","not very strong republican"),
"Independent" = c("independent, close to democrat", "independent (neither, no response)", "independent, close to republican"),
"Other Party" = c("other party")
))
# Without pipe operator
tabyl(our_gss, partyid_recoded)
our_gss |>
tabyl(partyid_recoded) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2)
our_table <- our_gss |>
tabyl(partyid_recoded) |>
adorn_totals(where = "row", na.rm = TRUE) |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2)
colnames(our_table) <- c(
"Political Party",
"Frequency",
"Percent",
"Valid Percent"
)
our_table
knitr::kable(our_table)
knitr::kable(our_table, "html") |>
as_image()
library(kableExtra)
knitr::kable(our_table, "html") |>
as_image()
install.packages("webshot2")
knitr::kable(our_table, "html") |>
as_image()
library(flextable)
flextable(our_table)
our_gss |>
tabyl(age) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2)
our_gss |>
tabyl(realrinc) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2)
our_gss |>
tabyl(age) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2)
our_gss |>
tabyl(age) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2) |>
our_gss |>
tabyl(age) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2) |>
flextable()
our_gss |>
tabyl(age) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2) |>
flextable()
age_tab <- our_gss |>
tabyl(age) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2) |>
flextable()
colnames(age_tab)
View(age_tab)
age_tab <- our_gss |>
tabyl(age) |>
adorn_totals(where = "row") |>
adorn_pct_formatting() |>
adorn_rounding(digits = 2)
colnames(age_tab)
colnames(age_tab) <- c("Age", "Frequency", "Percent", "Valid Percent")
flextable(age_tab)
age_tab
hist(our_gss$age,)
hist(our_gss$age,
main = "Age distribution of GSS respondents",
xlab = "Age of respondent",
)
hist(our_gss$realrinc,
main = "Income distribution of GSS respondents",
xlab = "Reported income")
library(janitor)
library(janitor)
library(tidyverse)
library(janitor)
library(tidyverse)
load("our_gss.rda")
our_gss <- our_gss |>
mutate(
partyid_recoded=fct_collapse(partyid,
"Democrat" = c("strong democrat", "not very strong democrat"),
"Republican" = c("strong republican","not very strong republican"),
"Independent" = c("independent, close to democrat", "independent (neither, no response)", "independent, close to republican"),
"Other Party" = c("other party")
))
# With pipe operator
our_gss |>
tabyl(partyid_recoded)
our_gss |>
drop_na(partyid_recoded) |>
select(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss |>
na.omit() |>
select(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
test <- our_gss |>
test <- our_gss |>
drop_na(partyid_recoded)
our_gss |>
drop_na(partyid_recoded) |>
fct_drop(partyid_recoded) |>
select(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss |>
drop_na(partyid_recoded) |>
select(partyid_recoded) |>
fct_drop(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
is.factor(our_gss$partyid_recoded)
test <- our_gss |>
drop_na(partyid_recoded) |>
select(partyid_recoded)
View(test)
our_gss |>
drop_na(partyid_recoded) |>
select(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss |>
drop_na(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss$partyid_recoded |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss$partyid_recoded |>
drop_na() |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss |>
drop_na() |>
select(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss |>
drop_na(partyid_recoded) |>
select(partyid_recoded) |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss |>
drop_na(partyid_recoded) |>
select(partyid_recoded) |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Poltical Party"
)
our_gss |>
drop_na(partyid_recoded) |>
select(partyid_recoded) |>
summary()
summary(our_gss$partyid_recoded)
test <- our_gss |>
filter(!is.na(partyid_recoded))
our_gss$partyid_recoded |>
filter(!is.na())
test <- our_gss$partyid_recoded |>
!is.na()
test <- our_gss$partyid_recoded |>
na.omit()
test
test <- our_gss$partyid_recoded |>
na.omit() |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Political Party"
)
our_gss$partyid_recoded |>
na.omit() |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Political Party"
)
our_gss$partyid_recoded |>
na.omit() |>
summary() |>
barplot(
cex.names = .75,
main = "Count of GSS Respondents by Political Party",
xlab = "Political party"
)
str(our_gss)
summary(our_gss$happy)
test <- our_gss$happy |>
na.omit()
summary(test)
test <- our_gss$happy
our_gss$happy |>
summary() |>
na.omit() |>
barplot(
main = "Happiness Distribution of 2022 GSS Respondents",
xlab = "Response value"
)
our_gss$happy |>
summary() |>
na.omit() |>
barplot(
main = "Happiness Distribution of 2022 GSS Respondents",
xlab = "Response value"
)
check <- our_gss[,!is.na(our_gss$partyid_recoded)]
check <- our_gss[,!is.na(partyid_recoded)]
check <- our_gss[!is.na(partyid_recoded),]
check <- our_gss[!is.na(our_gss$partyid_recoded),]
View(check)
check <- our_gss[!is.na(our_gss$happy),]
our_gss$happy |>
fct_drop() |>
summary() |>
barplot(
main = "Happiness Distribution of 2022 GSS Respondents",
xlab = "Response value"
)
is.na(our_gss$happy)
levels(our_gss$happy)
our_gss$happy |>
na.omit() |>
summary() |>
barplot(
main = "Happiness Distribution of 2022 GSS Respondents",
xlab = "Response value"
)
our_gss$age_ord |>
na.omit() |>
summary() |>
barplot(
main = "Age Distribution of GSS Respondents",
xlab = "Age grouping"
)
our_gss$age_ord |>
na.omit() |>
summary() |>
barplot(
main = "Age Distribution of GSS Respondents",
xlab = "Age grouping"
)
our_gss <- our_gss |>
mutate(
age_ord = cut(
age,
breaks = c(18, 36, 51, Inf),
include.lowest = TRUE,
right = FALSE,
labels = c("Younger", "Middle Age", "Older"),
ordered_result = TRUE
)
)
our_gss$age_ord |>
na.omit() |>
summary() |>
barplot(
main = "Age Distribution of GSS Respondents",
xlab = "Age grouping"
)
